<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>Room Version 1</title>
<style type="text/css">

pre.code .comment, code .comment { color: green }
pre.code .keyword, code .keyword { color: darkred; font-weight: bold }
pre.code .name.builtin, code .name.builtin { color: darkred; font-weight: bold }
pre.code .name.tag, code .name.tag { color: darkgreen }
pre.code .literal, code .literal { color: darkblue }
pre.code .literal.number, code .literal.number { color: blue }


/* HTTP Methods have class "name function" */
pre.code.http .name.function,  code.http .name.function { color: black; font-weight: bold }
/* HTTP Paths have class "name namespace" */
pre.code.http .name.namespace, code.http .name.namespace { color: darkgreen }
/* HTTP "HTTP" strings have class "keyword reserved" */
pre.code.http .keyword.reserved, code.http .keyword.reserved { color: black; font-weight: bold }
/* HTTP Header names have class "name attribute" */
pre.code.http .name.attribute, code.http .name.attribute { color: black; font-weight: bold }

</style>
<style type="text/css">

blockquote {
    margin: 20px 0 30px;
    padding-left: 20px;
}

</style>
<style type="text/css">

/*
 * basic.css
 * ~~~~~~~~~
 *
 * Sphinx stylesheet -- basic theme.
 *
 * :copyright: Copyright 2007-2010 by the Sphinx team, see AUTHORS.
 * :license: BSD, see LICENSE for details.
 *
 */

/* -- main layout ----------------------------------------------------------- */

div.clearer {
    clear: both;
}

/* -- relbar ---------------------------------------------------------------- */

div.related {
    width: 100%;
    font-size: 90%;
}

div.related h3 {
    display: none;
}

div.related ul {
    margin: 0;
    padding: 0 0 0 10px;
    list-style: none;
}

div.related li {
    display: inline;
}

div.related li.right {
    float: right;
    margin-right: 5px;
}

/* -- sidebar --------------------------------------------------------------- */

div.sphinxsidebarwrapper {
    padding: 10px 5px 0 10px;
}

div.sphinxsidebar {
    float: left;
    width: 230px;
    margin-left: -100%;
    font-size: 90%;
}

div.sphinxsidebar ul {
    list-style: none;
}

div.sphinxsidebar ul ul,
div.sphinxsidebar ul.want-points {
    margin-left: 20px;
    list-style: square;
}

div.sphinxsidebar ul ul {
    margin-top: 0;
    margin-bottom: 0;
}

div.sphinxsidebar form {
    margin-top: 10px;
}

div.sphinxsidebar input {
    border: 1px solid #98dbcc;
    font-family: sans-serif;
    font-size: 1em;
}

img {
    border: 0;
}

/* -- search page ----------------------------------------------------------- */

ul.search {
    margin: 10px 0 0 20px;
    padding: 0;
}

ul.search li {
    padding: 5px 0 5px 20px;
    background-image: url(file.png);
    background-repeat: no-repeat;
    background-position: 0 7px;
}

ul.search li a {
    font-weight: bold;
}

ul.search li div.context {
    color: #888;
    margin: 2px 0 0 30px;
    text-align: left;
}

ul.keywordmatches li.goodmatch a {
    font-weight: bold;
}

/* -- index page ------------------------------------------------------------ */

table.contentstable {
    width: 90%;
}

table.contentstable p.biglink {
    line-height: 150%;
}

a.biglink {
    font-size: 1.3em;
}

span.linkdescr {
    font-style: italic;
    padding-top: 5px;
    font-size: 90%;
}

/* -- general index --------------------------------------------------------- */

table.indextable {
    width: 100%;
}

table.indextable td {
    text-align: left;
    vertical-align: top;
}

table.indextable dl, table.indextable dd {
    margin-top: 0;
    margin-bottom: 0;
}

table.indextable tr.pcap {
    height: 10px;
}

table.indextable tr.cap {
    margin-top: 10px;
    background-color: #f2f2f2;
}

img.toggler {
    margin-right: 3px;
    margin-top: 3px;
    cursor: pointer;
}

div.modindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

div.genindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

/* -- general body styles --------------------------------------------------- */

a.headerlink {
    visibility: hidden;
}

h1:hover > a.headerlink,
h2:hover > a.headerlink,
h3:hover > a.headerlink,
h4:hover > a.headerlink,
h5:hover > a.headerlink,
h6:hover > a.headerlink,
dt:hover > a.headerlink {
    visibility: visible;
}

div.document p.caption {
    text-align: inherit;
}

div.document td {
    text-align: left;
}

.field-list ul {
    padding-left: 1em;
}

.first {
    margin-top: 0 !important;
}

p.rubric {
    margin-top: 30px;
    font-weight: bold;
}

.align-left {
    text-align: left;
}

.align-center {
    clear: both;
    text-align: center;
}

.align-right {
    text-align: right;
}

/* -- sidebars -------------------------------------------------------------- */

div.sidebar {
    margin: 0 0 0.5em 1em;
    border: 1px solid #ddb;
    padding: 7px 7px 0 7px;
    background-color: #ffe;
    width: 40%;
    float: right;
}

p.sidebar-title {
    font-weight: bold;
}

/* -- topics ---------------------------------------------------------------- */

div.topic {
    border: 1px solid #ccc;
    padding: 7px 7px 0 7px;
    margin: 10px 0 10px 0;
}

p.topic-title {
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 10px;
}

/* -- admonitions ----------------------------------------------------------- */

div.admonition {
    margin-top: 10px;
    margin-bottom: 10px;
    padding: 7px;
}

div.admonition dt {
    font-weight: bold;
}

div.admonition dl {
    margin-bottom: 0;
}

p.admonition-title {
    margin: 0px 10px 5px 0px;
    font-weight: bold;
}

div.document p.centered {
    text-align: center;
    margin-top: 25px;
}

/* -- tables ---------------------------------------------------------------- */

table.docutils {
    border: 0;
    border-collapse: collapse;
}

table.docutils td, table.docutils th {
    padding: 1px 8px 1px 5px;
    border-top: 0;
    border-left: 0;
    border-right: 0;
    border-bottom: 1px solid #aaa;
}

table.field-list td, table.field-list th {
    border: 0 !important;
}

table.footnote td, table.footnote th {
    border: 0 !important;
}

th {
    text-align: left;
    padding-right: 5px;
}

table.citation {
    border-left: solid 1px gray;
    margin-left: 1px;
}

table.citation td {
    border-bottom: none;
}

table.colwidths-auto caption {
    font-family: 'Inconsolata', monospace;
    font-weight: 800;
    font-size: 120%;
    padding: 5px;
    text-align: left;
    margin-bottom: 2px;
}

.section ol, .section li {
    margin: 0px 0px 0px 30px !important;
}

p.httpheaders {
    font-weight: 800;
    font-size: 120%;
    padding: 5px;
    text-align: left;
    margin-bottom: 2px;
}

table.colwidths-auto {
    width:100%;
    margin-top: 20px;
}

table.colwidths-auto tr td:nth-child(1) {
    width: 15%;
}

table.colwidths-auto tr td:nth-child(2) {
    width: 15%;
    font-family: 'Inconsolata', monospace;
}

table.colwidths-auto tr td:nth-child(3) {
    width: 70%;
}


/* -- other body styles ----------------------------------------------------- */

ol.arabic {
    list-style: decimal;
}

ol.loweralpha {
    list-style: lower-alpha;
}

ol.upperalpha {
    list-style: upper-alpha;
}

ol.lowerroman {
    list-style: lower-roman;
}

ol.upperroman {
    list-style: upper-roman;
}

dl {
    margin-bottom: 15px;
}

dd p {
    margin-top: 0px;
}

dd ul, dd table {
    margin-bottom: 10px;
}

dd {
    margin-top: 3px;
    margin-bottom: 10px;
    margin-left: 30px;
}

dt:target, .highlighted {
    background-color: #fbe54e;
}

dl.glossary dt {
    font-weight: bold;
    font-size: 1.1em;
}

.field-list ul {
    margin: 0;
    padding-left: 1em;
}

.field-list p {
    margin: 0;
}

.refcount {
    color: #060;
}

.optional {
    font-size: 1.3em;
}

.versionmodified {
    font-style: italic;
}

.system-message {
    background-color: #fda;
    padding: 5px;
    border: 3px solid red;
}

.footnote:target  {
    background-color: #ffa
}

.line-block {
    display: block;
    margin-top: 1em;
    margin-bottom: 1em;
}

.line-block .line-block {
    margin-top: 0;
    margin-bottom: 0;
    margin-left: 1.5em;
}

.guilabel, .menuselection {
    font-family: sans-serif;
}

.accelerator {
    text-decoration: underline;
}

.classifier {
    font-style: oblique;
}

/* -- proposals page -------------------------------------------------------- */

#tables-of-tracked-proposals h2 {
    padding-left: 10px;
    position: -webkit-sticky;
    position: sticky;
}

/* Move sticky headers below header bar on desktop */
@media all and (min-width:980px) {
    #tables-of-tracked-proposals h2 {
        top: 52px;
    }
}

/* Sticky headers stick to the top on mobile */
@media all and (min-width:0px) and (max-width: 980px) {
    #tables-of-tracked-proposals h2 {
        top: 0px;
    }
}

/* -- code displays --------------------------------------------------------- */

pre {
    overflow: auto;
}

td.linenos pre {
    padding: 5px 0px;
    border: 0;
    background-color: transparent;
    color: #aaa;
}

table.highlighttable {
    margin-left: 0.5em;
}

table.highlighttable td {
    padding: 0 0.5em 0 0.5em;
}

tt.descname {
    background-color: transparent;
    font-weight: bold;
    font-size: 1.2em;
}

tt.descclassname {
    background-color: transparent;
}

tt.xref, a tt {
    background-color: transparent;
    font-weight: bold;
}

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
    background-color: transparent;
}

.viewcode-link {
    float: right;
}

.viewcode-back {
    float: right;
    font-family: sans-serif;
}

div.viewcode-block:target {
    margin: -1px -10px;
    padding: 0 10px;
}

/* -- math display ---------------------------------------------------------- */

img.math {
    vertical-align: middle;
}

div.document div.math p {
    text-align: center;
}

span.eqno {
    float: right;
}

/* -- printout stylesheet --------------------------------------------------- */

@media print {
    div.document,
    div.documentwrapper,
    div.bodywrapper {
        margin: 0 !important;
        width: 100%;
    }

    div.sphinxsidebar,
    div.related,
    div.footer,
    #top-link {
        display: none;
    }
}


</style>
<style type="text/css">

/*
 * nature.css_t
 * ~~~~~~~~~~~~
 *
 * Sphinx stylesheet -- nature theme.
 *
 * :copyright: Copyright 2007-2010 by the Sphinx team, see AUTHORS.
 * :license: BSD, see LICENSE for details.
 *
 */

/* -- page layout ----------------------------------------------------------- */

body {
    font-family: Arial, sans-serif;
    font-size: 100%;
    /*background-color: #111;*/
    color: #555;
    margin: 0;
    padding: 0;
}

div.documentwrapper {
    float: left;
    width: 100%;
}

div.bodywrapper {
    margin: 0 0 0 230px;
}

hr {
    border: 1px solid #B1B4B6;
}

/*
div.document {
    background-color: #eee;
}
*/

div.document {
    background-color: #ffffff;
    color: #3E4349;
    padding: 0 30px 30px 30px;
    font-size: 0.9em;
}

div.footer {
    color: #555;
    width: 100%;
    padding: 13px 0;
    text-align: center;
    font-size: 75%;
}

div.footer a {
    color: #444;
    text-decoration: underline;
}

div.related {
    background-color: #6BA81E;
    line-height: 32px;
    color: #fff;
    text-shadow: 0px 1px 0 #444;
    font-size: 0.9em;
}

div.related a {
    color: #E2F3CC;
}

div.sphinxsidebar {
    font-size: 0.75em;
    line-height: 1.5em;
}

div.sphinxsidebarwrapper{
    padding: 20px 0;
}

div.sphinxsidebar h3,
div.sphinxsidebar h4 {
    font-family: Arial, sans-serif;
    color: #222;
    font-size: 1.2em;
    font-weight: normal;
    margin: 0;
    padding: 5px 10px;
    background-color: #ddd;
    text-shadow: 1px 1px 0 white
}

div.sphinxsidebar h4{
    font-size: 1.1em;
}

div.sphinxsidebar h3 a {
    color: #444;
}


div.sphinxsidebar p {
    color: #888;
    padding: 5px 20px;
}

div.sphinxsidebar p.topless {
}

div.sphinxsidebar ul {
    margin: 10px 20px;
    padding: 0;
    color: #000;
}

div.sphinxsidebar a {
    color: #444;
}

div.sphinxsidebar input {
    border: 1px solid #ccc;
    font-family: sans-serif;
    font-size: 1em;
}

div.sphinxsidebar input[type=text]{
    margin-left: 20px;
}

/* -- body styles ----------------------------------------------------------- */

a {
    color: #005B81;
    text-decoration: none;
}

a:hover {
    color: #E32E00;
    text-decoration: underline;
}

div.document h1,
div.document h2,
div.document h3,
div.document h4,
div.document h5,
div.document h6 {
    font-family: Arial, sans-serif;
    background-color: #BED4EB;
    font-weight: normal;
    color: #212224;
    margin: 30px 0px 10px 0px;
    padding: 5px 0 5px 10px;
    text-shadow: 0px 1px 0 white
}

div.document h1 { border-top: 20px solid white; margin-top: 0; font-size: 200%; }
div.document h2 { font-size: 150%; background-color: #C8D5E3; }
div.document h3 { font-size: 120%; background-color: #D8DEE3; }
div.document h4 { font-size: 110%; background-color: #D8DEE3; }
div.document h5 { font-size: 100%; background-color: #D8DEE3; }
div.document h6 { font-size: 100%; background-color: #D8DEE3; }

a.headerlink {
    color: #c60f0f;
    font-size: 0.8em;
    padding: 0 4px 0 4px;
    text-decoration: none;
}

a.headerlink:hover {
    background-color: #c60f0f;
    color: white;
}

div.document p, div.document dd, div.document li {
    line-height: 1.5em;
}

div.admonition p.admonition-title + p {
    display: inline;
}

div.highlight{
    background-color: white;
}

div.note {
    background-color: #eee;
    border: 1px solid #ccc;
}

div.seealso {
    background-color: #ffc;
    border: 1px solid #ff6;
}

div.topic {
    background-color: #eee;
}

div.warning {
    background-color: #ffe4e4;
    border: 1px solid #f66;
}

p.admonition-title {
    display: inline;
}

p.admonition-title:after {
    content: ":";
}

pre {
    padding: 10px;
    background-color: White;
    color: #222;
    line-height: 1.2em;
    border: 1px solid #C6C9CB;
    font-size: 1.1em;
    margin: 1.5em 0 1.5em 0;
    -webkit-box-shadow: 1px 1px 1px #d8d8d8;
    -moz-box-shadow: 1px 1px 1px #d8d8d8;
}

tt {
    background-color: #ecf0f3;
    color: #222;
    /* padding: 1px 2px; */
    font-size: 1.1em;
    font-family: monospace;
}

.viewcode-back {
    font-family: Arial, sans-serif;
}

div.viewcode-block:target {
    background-color: #f4debf;
    border-top: 1px solid #ac9;
    border-bottom: 1px solid #ac9;
}

ul li dd {
	margin-top: 0;
}

ul li dl {
	margin-bottom: 0;
}

li dl dd {
	margin-bottom: 0;
}

dd ul {
	padding-left: 0;
}

li dd ul {
	margin-bottom: 0;
}

table {
    margin-top: 10px;
    margin-bottom: 10px;
    border: 0;
    border-collapse: collapse;
}

td[colspan]:not([colspan="1"]) {
    background: #eeeeee;
    text-transform: capitalize;
}

thead {
    background: #eeeeee;
}

div.admonition-rationale {
    background-color: #efe;
    border: 1px solid #ccc;
}

div.admonition-example {
    background-color: #eef;
    border: 1px solid #ccc;
}


</style>
<style type="text/css">

/* Column with header cells */
table.docutils tbody th.stub {
    background: #eeeeee;
}

</style>
<style type="text/css">

/*
*   math2html: convert LaTeX equations to HTML output.
*
*   Copyright (C) 2009,2010 Alex Fernández
*
*   Released under the terms of the `2-Clause BSD license'_, in short:
*   Copying and distribution of this file, with or without modification,
*   are permitted in any medium without royalty provided the copyright
*   notice and this notice are preserved.
*   This file is offered as-is, without any warranty.
*
* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause
*
*   Based on eLyXer: convert LyX source files to HTML output.
*   http://elyxer.nongnu.org/
*/
/* --end--
* CSS file for LaTeX formulas.
*/

/* Formulas */
.formula {
	text-align: center;
	font-family: "Droid Serif", "DejaVu Serif", "STIX", serif;
	margin: 1.2em 0;
}
span.formula {
	white-space: nowrap;
}
div.formula {
	padding: 0.5ex;
	margin-left: auto;
	margin-right: auto;
}

/* Basic features */
a.eqnumber {
	display: inline-block;
	float: right;
	clear: right;
	font-weight: bold;
}
span.unknown {
	color: #800000;
}
span.ignored, span.arraydef {
	display: none;
}
.formula i {
	letter-spacing: 0.1ex;
}

/* Alignment */
.align-left, .align-l {
	text-align: left;
}
.align-right, .align-r {
	text-align: right;
}
.align-center, .align-c {
	text-align: center;
}

/* Structures */
span.overline, span.bar {
	text-decoration: overline;
}
.fraction, .fullfraction {
	display: inline-block;
	vertical-align: middle;
	text-align: center;
}
.fraction .fraction {
	font-size: 80%;
	line-height: 100%;
}
span.numerator {
	display: block;
}
span.denominator {
	display: block;
	padding: 0ex;
	border-top: thin solid;
}
sup.numerator, sup.unit {
	font-size: 70%;
	vertical-align: 80%;
}
sub.denominator, sub.unit {
	font-size: 70%;
	vertical-align: -20%;
}
span.sqrt {
	display: inline-block;
	vertical-align: middle;
	padding: 0.1ex;
}
sup.root {
	font-size: 70%;
	position: relative;
	left: 1.4ex;
}
span.radical {
	display: inline-block;
	padding: 0ex;
	font-size: 150%;
	vertical-align: top;
}
span.root {
	display: inline-block;
	border-top: thin solid;
	padding: 0ex;
	vertical-align: middle;
}
span.symbol {
	line-height: 125%;
	font-size: 125%;
}
span.bigsymbol {
	line-height: 150%;
	font-size: 150%;
}
span.largesymbol {
	font-size: 175%;
}
span.hugesymbol {
	font-size: 200%;
}
span.scripts {
	display: inline-table;
	vertical-align: middle;
}
.script {
	display: table-row;
	text-align: left;
	line-height: 150%;
}
span.limits {
	display: inline-table;
	vertical-align: middle;
}
.limit {
	display: table-row;
	line-height: 99%;
}
sup.limit, sub.limit {
	line-height: 100%;
}
span.symbolover {
	display: inline-block;
	text-align: center;
	position: relative;
	float: right;
	right: 100%;
	bottom: 0.5em;
	width: 0px;
}
span.withsymbol {
	display: inline-block;
}
span.symbolunder {
	display: inline-block;
	text-align: center;
	position: relative;
	float: right;
	right: 80%;
	top: 0.3em;
	width: 0px;
}

/* Environments */
span.array, span.bracketcases, span.binomial, span.environment {
	display: inline-table;
	text-align: center;
	border-collapse: collapse;
	margin: 0em;
	vertical-align: middle;
}
span.arrayrow, span.binomrow {
	display: table-row;
	padding: 0ex;
	border: 0ex;
}
span.arraycell, span.bracket, span.case, span.binomcell, span.environmentcell {
	display: table-cell;
	padding: 0ex 0.2ex;
	line-height: 99%;
	border: 0ex;
}
/*
* CSS file for LaTeX formulas, extra stuff:
* binomials, vertical braces, stackrel, fonts and colors.
*/

/* Inline binomials */
span.binom {
	display: inline-block;
	vertical-align: middle;
	text-align: center;
	font-size: 80%;
}
span.binomstack {
	display: block;
	padding: 0em;
}

/* Over- and underbraces */
span.overbrace {
	border-top: 2pt solid;
}
span.underbrace {
	border-bottom: 2pt solid;
}

/* Stackrel */
span.stackrel {
	display: inline-block;
	text-align: center;
}
span.upstackrel {
	display: block;
	padding: 0em;
	font-size: 80%;
	line-height: 64%;
	position: relative;
	top: 0.15em;

}
span.downstackrel {
	display: block;
	vertical-align: bottom;
	padding: 0em;
}

/* Fonts */
span.mathsf, span.textsf {
	font-style: normal;
	font-family: sans-serif;
}
span.mathrm, span.textrm {
	font-style: normal;
	font-family: serif;
}
span.text, span.textnormal {
	font-style: normal;
}
span.textipa {
	color: #008080;
}
span.fraktur {
	font-family: "Lucida Blackletter", eufm10, blackletter;
}
span.blackboard {
	font-family: Blackboard, msbm10, serif;
}
span.scriptfont {
	font-family: "Monotype Corsiva", "Apple Chancery", "URW Chancery L", cursive;
	font-style: italic;
}

/* Colors */
span.colorbox {
	display: inline-block;
	padding: 5px;
}
span.fbox {
	display: inline-block;
	border: thin solid black;
	padding: 2px;
}
span.boxed, span.framebox {
	display: inline-block;
	border: thin solid black;
	padding: 5px;
}


</style>
</head>
<body>
<div class="document" id="room-version-1">
<h1 class="title">Room Version 1</h1>

<!-- Copyright 2017,2019 New Vector Ltd -->
<!--  -->
<!-- Licensed under the Apache License, Version 2.0 (the "License"); -->
<!-- you may not use this file except in compliance with the License. -->
<!-- You may obtain a copy of the License at -->
<!--  -->
<!-- http://www.apache.org/licenses/LICENSE-2.0 -->
<!--  -->
<!-- Unless required by applicable law or agreed to in writing, software -->
<!-- distributed under the License is distributed on an "AS IS" BASIS, -->
<!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. -->
<!-- See the License for the specific language governing permissions and -->
<!-- limitations under the License. -->
<p>This room version is the first ever version for rooms, and contains the building
blocks for other room versions.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#server-implementation-components" id="id1">1&nbsp;&nbsp;&nbsp;Server implementation components</a><ul class="auto-toc">
<li><a class="reference internal" href="#state-resolution" id="id2">1.1&nbsp;&nbsp;&nbsp;State resolution</a></li>
<li><a class="reference internal" href="#authorization-rules" id="id3">1.2&nbsp;&nbsp;&nbsp;Authorization rules</a></li>
<li><a class="reference internal" href="#event-format" id="id4">1.3&nbsp;&nbsp;&nbsp;Event format</a><ul class="auto-toc">
<li><a class="reference internal" href="#persistent-data-unit-schema" id="id5">1.3.1&nbsp;&nbsp;&nbsp;<tt class="docutils literal">Persistent Data Unit</tt> schema</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p><a class="anchor" id="server-implementation-components"></a></p>
<div class="section" id="server-implementation-components">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Server implementation components</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The information contained in this section is strictly for server implementors.
Applications which use the Client-Server API are generally unaffected by the
details contained here, and can safely ignore their presence.</p>
</div>
<p>The algorithms defined here should only apply to version 1 rooms. Other algorithms
may be used by other room versions, and as such servers should be aware of which
version room they are dealing with prior to executing a given algorithm.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Although room version 1 is the most popular room version, it is known to have
undesirable effects. Servers implementing support for room version 1 should be
aware that restrictions should be generally relaxed and that inconsistencies
may occur until room version 2 (or later) is ready and adopted.</p>
</div>
<p><a class="anchor" id="state-resolution"></a></p>
<div class="section" id="state-resolution">
<h2><a class="toc-backref" href="#id2">1.1&nbsp;&nbsp;&nbsp;State resolution</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This section documents the state resolution algorithm as implemented by
Synapse as of December 2017 (and therefore the de-facto Matrix protocol).
However, this algorithm is known to have some problems.</p>
</div>
<p>The room state <span class="formula"><i>S</i>’(<i>E</i>)</span> after an event <span class="formula"><i>E</i></span> is defined in terms of
the room state <span class="formula"><i>S</i>(<i>E</i>)</span> before <span class="formula"><i>E</i></span>, and depends on whether
<span class="formula"><i>E</i></span> is a state event or a message event:</p>
<ul class="simple">
<li>If <span class="formula"><i>E</i></span> is a message event, then <span class="formula"><i>S</i>’(<i>E</i>) = <i>S</i>(<i>E</i>)</span>.</li>
<li>If <span class="formula"><i>E</i></span> is a state event, then <span class="formula"><i>S</i>’(<i>E</i>)</span> is <span class="formula"><i>S</i>(<i>E</i>)</span>, except
that its entry corresponding to <span class="formula"><i>E</i></span>'s <tt class="docutils literal">event_type</tt> and <tt class="docutils literal">state_key</tt>
is replaced by <span class="formula"><i>E</i></span>'s <tt class="docutils literal">event_id</tt>.</li>
</ul>
<p>The room state <span class="formula"><i>S</i>(<i>E</i>)</span> before <span class="formula"><i>E</i></span> is the <em>resolution</em> of the set of
states <span class="formula">{<i>S</i>’(<i>E</i>’), <i>S</i>’(<i>E</i>’’), …}</span> consisting of the states after each of
<span class="formula"><i>E</i></span>'s <tt class="docutils literal">prev_event</tt>s <span class="formula">{<i>E</i>’, <i>E</i>’’, …}</span>.</p>
<p>The <em>resolution</em> of a set of states is defined as follows.  The resolved state
is built up in a number of passes; here we use <span class="formula"><i>R</i></span> to refer to the
results of the resolution so far.</p>
<ul class="simple">
<li>Start by setting <span class="formula"><i>R</i></span> to the union of the states to be resolved,
excluding any <em>conflicting</em> events.</li>
<li>First we resolve conflicts between <tt class="docutils literal">m.room.power_levels</tt> events. If there
is no conflict, this step is skipped, otherwise:<ul>
<li>Assemble all the <tt class="docutils literal">m.room.power_levels</tt> events from the states to
be resolved into a list.</li>
<li>Sort the list by ascending <tt class="docutils literal">depth</tt> then descending <tt class="docutils literal">sha1(event_id)</tt>.</li>
<li>Add the first event in the list to <span class="formula"><i>R</i></span>.</li>
<li>For each subsequent event in the list, check that the event would be
allowed by the authorization rules for a room in state <span class="formula"><i>R</i></span>. If the
event would be allowed, then update <span class="formula"><i>R</i></span> with the event and continue
with the next event in the list. If it would not be allowed, stop and
continue below with <tt class="docutils literal">m.room.join_rules</tt> events.</li>
</ul>
</li>
<li>Repeat the above process for conflicts between <tt class="docutils literal">m.room.join_rules</tt> events.</li>
<li>Repeat the above process for conflicts between <tt class="docutils literal">m.room.member</tt> events.</li>
<li>No other events affect the authorization rules, so for all other conflicts,
just pick the event with the highest depth and lowest <tt class="docutils literal">sha1(event_id)</tt> that
passes authentication in <span class="formula"><i>R</i></span> and add it to <span class="formula"><i>R</i></span>.</li>
</ul>
<p>A <em>conflict</em> occurs between states where those states have different
<tt class="docutils literal">event_ids</tt> for the same <tt class="docutils literal">(event_type, state_key)</tt>. The events thus
affected are said to be <em>conflicting</em> events.</p>
</div>
<p><a class="anchor" id="authorization-rules"></a></p>
<div class="section" id="authorization-rules">
<h2><a class="toc-backref" href="#id3">1.2&nbsp;&nbsp;&nbsp;Authorization rules</a></h2>
<p>The types of state events that affect authorization are:</p>
<ul class="simple">
<li><tt class="docutils literal">m.room.create</tt></li>
<li><tt class="docutils literal">m.room.member</tt></li>
<li><tt class="docutils literal">m.room.join_rules</tt></li>
<li><tt class="docutils literal">m.room.power_levels</tt></li>
<li><tt class="docutils literal">m.room.third_party_invite</tt></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Power levels are inferred from defaults when not explicitly supplied.
For example, mentions of the <tt class="docutils literal">sender</tt>'s power level can also refer
to the default power level for users in the room.</p>
</div>
<p>The rules are as follows:</p>
<ol class="arabic simple">
<li>If type is <tt class="docutils literal">m.room.create</tt>:<ol class="loweralpha">
<li>If it has any previous events, reject.</li>
<li>If the domain of the <tt class="docutils literal">room_id</tt> does not match the domain of the
<tt class="docutils literal">sender</tt>, reject.</li>
<li>If <tt class="docutils literal">content.room_version</tt> is present and is not a recognised version,
reject.</li>
<li>If <tt class="docutils literal">content</tt> has no <tt class="docutils literal">creator</tt> field, reject.</li>
<li>Otherwise, allow.</li>
</ol>
</li>
<li>Reject if event has <tt class="docutils literal">auth_events</tt> that:<ol class="loweralpha">
<li>have duplicate entries for a given <tt class="docutils literal">type</tt> and <tt class="docutils literal">state_key</tt> pair</li>
<li>have entries whose <tt class="docutils literal">type</tt> and <tt class="docutils literal">state_key</tt> don't match those
specified by the <a class="reference external" href="../server_server/unstable.html#auth-events-selection">auth events selection</a> algorithm described in the
server specification.</li>
</ol>
</li>
<li>If event does not have a <tt class="docutils literal">m.room.create</tt> in its <tt class="docutils literal">auth_events</tt>, reject.</li>
<li>If type is <tt class="docutils literal">m.room.aliases</tt>:<ol class="loweralpha">
<li>If event has no <tt class="docutils literal">state_key</tt>, reject.</li>
<li>If sender's domain doesn't matches <tt class="docutils literal">state_key</tt>, reject.</li>
<li>Otherwise, allow.</li>
</ol>
</li>
<li>If type is <tt class="docutils literal">m.room.member</tt>:<ol class="loweralpha">
<li>If no <tt class="docutils literal">state_key</tt> key or <tt class="docutils literal">membership</tt> key in <tt class="docutils literal">content</tt>, reject.</li>
<li>If <tt class="docutils literal">membership</tt> is <tt class="docutils literal">join</tt>:<ol class="lowerroman">
<li>If the only previous event is an <tt class="docutils literal">m.room.create</tt>
and the <tt class="docutils literal">state_key</tt> is the creator, allow.</li>
<li>If the <tt class="docutils literal">sender</tt> does not match <tt class="docutils literal">state_key</tt>, reject.</li>
<li>If the <tt class="docutils literal">sender</tt> is banned, reject.</li>
<li>If the <tt class="docutils literal">join_rule</tt> is <tt class="docutils literal">invite</tt> then allow if membership state
is <tt class="docutils literal">invite</tt> or <tt class="docutils literal">join</tt>.</li>
<li>If the <tt class="docutils literal">join_rule</tt> is <tt class="docutils literal">public</tt>, allow.</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>If <tt class="docutils literal">membership</tt> is <tt class="docutils literal">invite</tt>:<ol class="lowerroman">
<li>If <tt class="docutils literal">content</tt> has <tt class="docutils literal">third_party_invite</tt> key:<ol class="arabic">
<li>If <em>target user</em> is banned, reject.</li>
<li>If <tt class="docutils literal">content.third_party_invite</tt> does not have a
<tt class="docutils literal">signed</tt> key, reject.</li>
<li>If <tt class="docutils literal">signed</tt> does not have <tt class="docutils literal">mxid</tt> and <tt class="docutils literal">token</tt> keys, reject.</li>
<li>If <tt class="docutils literal">mxid</tt> does not match <tt class="docutils literal">state_key</tt>, reject.</li>
<li>If there is no <tt class="docutils literal">m.room.third_party_invite</tt> event in the
current room state with <tt class="docutils literal">state_key</tt> matching <tt class="docutils literal">token</tt>, reject.</li>
<li>If <tt class="docutils literal">sender</tt> does not match <tt class="docutils literal">sender</tt> of the
<tt class="docutils literal">m.room.third_party_invite</tt>, reject.</li>
<li>If any signature in <tt class="docutils literal">signed</tt> matches any public key in the
<tt class="docutils literal">m.room.third_party_invite</tt> event, allow. The public keys are
in <tt class="docutils literal">content</tt> of <tt class="docutils literal">m.room.third_party_invite</tt> as:<ol class="arabic">
<li>A single public key in the <tt class="docutils literal">public_key</tt> field.</li>
<li>A list of public keys in the <tt class="docutils literal">public_keys</tt> field.</li>
</ol>
</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>If the <tt class="docutils literal">sender</tt>'s current membership state is not <tt class="docutils literal">join</tt>, reject.</li>
<li>If <em>target user</em>'s current membership state is <tt class="docutils literal">join</tt> or <tt class="docutils literal">ban</tt>,
reject.</li>
<li>If the <tt class="docutils literal">sender</tt>'s power level is greater than or equal to the <em>invite
level</em>, allow.</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>If <tt class="docutils literal">membership</tt> is <tt class="docutils literal">leave</tt>:<ol class="lowerroman">
<li>If the <tt class="docutils literal">sender</tt> matches <tt class="docutils literal">state_key</tt>, allow if and only if that user's
current membership state is <tt class="docutils literal">invite</tt> or <tt class="docutils literal">join</tt>.</li>
<li>If the <tt class="docutils literal">sender</tt>'s current membership state is not <tt class="docutils literal">join</tt>, reject.</li>
<li>If the <em>target user</em>'s current membership state is <tt class="docutils literal">ban</tt>, and the
<tt class="docutils literal">sender</tt>'s power level is less than the <em>ban level</em>, reject.</li>
<li>If the <tt class="docutils literal">sender</tt>'s power level is greater than or equal to the <em>kick
level</em>, and the <em>target user</em>'s power level is less than the
<tt class="docutils literal">sender</tt>'s power level, allow.</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>If <tt class="docutils literal">membership</tt> is <tt class="docutils literal">ban</tt>:<ol class="lowerroman">
<li>If the <tt class="docutils literal">sender</tt>'s current membership state is not <tt class="docutils literal">join</tt>, reject.</li>
<li>If the <tt class="docutils literal">sender</tt>'s power level is greater than or equal to the <em>ban
level</em>, and the <em>target user</em>'s power level is less than the
<tt class="docutils literal">sender</tt>'s power level, allow.</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>Otherwise, the membership is unknown. Reject.</li>
</ol>
</li>
<li>If the <tt class="docutils literal">sender</tt>'s current membership state is not <tt class="docutils literal">join</tt>, reject.</li>
<li>If type is <tt class="docutils literal">m.room.third_party_invite</tt>:<ol class="loweralpha">
<li>Allow if and only if <tt class="docutils literal">sender</tt>'s current power level is greater than
or equal to the <em>invite level</em>.</li>
</ol>
</li>
<li>If the event type's <em>required power level</em> is greater than the <tt class="docutils literal">sender</tt>'s power
level, reject.</li>
<li>If the event has a <tt class="docutils literal">state_key</tt> that starts with an <tt class="docutils literal">&#64;</tt> and does not match
the <tt class="docutils literal">sender</tt>, reject.</li>
<li>If type is <tt class="docutils literal">m.room.power_levels</tt>:<ol class="loweralpha">
<li>If <tt class="docutils literal">users</tt> key in <tt class="docutils literal">content</tt> is not a dictionary with keys that are
valid user IDs with values that are integers (or a string that is an
integer), reject.</li>
<li>If there is no previous <tt class="docutils literal">m.room.power_levels</tt> event in the room, allow.</li>
<li>For the keys <tt class="docutils literal">users_default</tt>, <tt class="docutils literal">events_default</tt>,
<tt class="docutils literal">state_default</tt>, <tt class="docutils literal">ban</tt>, <tt class="docutils literal">redact</tt>, <tt class="docutils literal">kick</tt>, <tt class="docutils literal">invite</tt> check if they
were added, changed or removed. For each found alteration:<ol class="lowerroman">
<li>If the current value is higher than the <tt class="docutils literal">sender</tt>'s current power level,
reject.</li>
<li>If the new value is higher than the <tt class="docutils literal">sender</tt>'s current power level,
reject.</li>
</ol>
</li>
<li>For each entry being added, changed or removed in both the <tt class="docutils literal">events</tt> and
<tt class="docutils literal">users</tt> keys:<ol class="lowerroman">
<li>If the current value is higher than the <tt class="docutils literal">sender</tt>'s current power level,
reject.</li>
<li>If the new value is higher than the <tt class="docutils literal">sender</tt>'s current power level,
reject.</li>
</ol>
</li>
<li>For each entry being changed under the <tt class="docutils literal">users</tt> key, other than the
<tt class="docutils literal">sender</tt>'s own entry:<ol class="lowerroman">
<li>If the current value is equal to the <tt class="docutils literal">sender</tt>'s current power level,
reject.</li>
</ol>
</li>
<li>Otherwise, allow.</li>
</ol>
</li>
<li>If type is <tt class="docutils literal">m.room.redaction</tt>:<ol class="loweralpha">
<li>If the <tt class="docutils literal">sender</tt>'s power level is greater than or equal to the <em>redact
level</em>, allow.</li>
<li>If the domain of the <tt class="docutils literal">event_id</tt> of the event being redacted is the same
as the domain of the <tt class="docutils literal">event_id</tt> of the <tt class="docutils literal">m.room.redaction</tt>, allow.</li>
<li>Otherwise, reject.</li>
</ol>
</li>
<li>Otherwise, allow.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Some consequences of these rules:</p>
<ul class="last simple">
<li>Unless you are a member of the room, the only permitted operations (apart
from the initial create/join) are: joining a public room; accepting or
rejecting an invitation to a room.</li>
<li>To unban somebody, you must have power level greater than or equal to both
the kick <em>and</em> ban levels, <em>and</em> greater than the target user's power
level.</li>
</ul>
</div>
</div>
<p><a class="anchor" id="event-format"></a></p>
<div class="section" id="event-format">
<h2><a class="toc-backref" href="#id4">1.3&nbsp;&nbsp;&nbsp;Event format</a></h2>
<p>Events in version 1 rooms have the following structure:</p>
<p><a class="anchor" id="persistent-data-unit-schema"></a></p>
<div class="section" id="persistent-data-unit-schema">
<h3><a class="toc-backref" href="#id5">1.3.1&nbsp;&nbsp;&nbsp;<tt class="docutils literal">Persistent Data Unit</tt> schema</a></h3>
<p>A persistent data unit (event) for room versions 1 and 2.</p>
<p><tt class="docutils literal">Persistent Data Unit</tt></p>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>room_id</td>
<td>string</td>
<td><strong>Required.</strong> Room identifier.</td>
</tr>
<tr><td>sender</td>
<td>string</td>
<td><strong>Required.</strong> The ID of the user sending the
event.</td>
</tr>
<tr><td>origin</td>
<td>string</td>
<td><strong>Required.</strong> The <tt class="docutils literal">server_name</tt> of the
homeserver that created this event.</td>
</tr>
<tr><td>origin_server_ts</td>
<td>integer</td>
<td><strong>Required.</strong> Timestamp in milliseconds on origin
homeserver when this event was created.</td>
</tr>
<tr><td>type</td>
<td>string</td>
<td><strong>Required.</strong> Event type</td>
</tr>
<tr><td>state_key</td>
<td>string</td>
<td>If this key is present, the event is a state
event, and it will replace previous events with
the same <tt class="docutils literal">type</tt> and <tt class="docutils literal">state_key</tt> in the room
state.</td>
</tr>
<tr><td>content</td>
<td>object</td>
<td><strong>Required.</strong> The content of the event.</td>
</tr>
<tr><td>prev_events</td>
<td>[[string, Event Hash]]</td>
<td><strong>Required.</strong> Event IDs and reference hashes for
the most recent events in the room that the
homeserver was aware of when it made this event.</td>
</tr>
<tr><td>depth</td>
<td>integer</td>
<td><strong>Required.</strong> The maximum depth of the
<tt class="docutils literal">prev_events</tt>, plus one. Must be less than the
maximum value for an integer (2^63 - 1). If the
room's depth is already at the limit, the depth
must be set to the limit.</td>
</tr>
<tr><td>auth_events</td>
<td>[[string, Event Hash]]</td>
<td><strong>Required.</strong> Event IDs and reference hashes for
the authorization events that would allow this
event to be in the room.</td>
</tr>
<tr><td>redacts</td>
<td>string</td>
<td>For redaction events, the ID of the event being
redacted.</td>
</tr>
<tr><td>unsigned</td>
<td>Example Unsigned Data</td>
<td>Additional data added by the origin server but not
covered by the <tt class="docutils literal">signatures</tt>. More keys than
those defined here may be used.</td>
</tr>
<tr><td>event_id</td>
<td>string</td>
<td><strong>Required.</strong> The event ID for the PDU.</td>
</tr>
<tr><td>hashes</td>
<td>Event Hash</td>
<td><strong>Required.</strong> Content hashes of the PDU, following
the algorithm specified in <a class="reference external" href="../server_server/unstable.html#signing-events">Signing Events</a>.</td>
</tr>
<tr><td>signatures</td>
<td>{string: {string: string}}</td>
<td><strong>Required.</strong> Signatures for the PDU, following
the algorithm specified in <a class="reference external" href="../server_server/unstable.html#signing-events">Signing Events</a>.</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal">Example Unsigned Data</tt></p>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>age</td>
<td>integer</td>
<td>The number of milliseconds that have passed since
this message was sent.</td>
</tr>
<tr><td>replaces_state</td>
<td>string</td>
<td>The event ID of the state event this event
replaces.</td>
</tr>
<tr><td>prev_sender</td>
<td>string</td>
<td>The sender of the replaced state event.</td>
</tr>
<tr><td>prev_content</td>
<td>object</td>
<td>The content of the replaced state event.</td>
</tr>
<tr><td>redacted_because</td>
<td>string</td>
<td>A reason for why the event was redacted.</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal">Event Hash</tt></p>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr><th class="head">Parameter</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>sha256</td>
<td>string</td>
<td><strong>Required.</strong> The hash.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<pre class="code json literal-block">
<span class="punctuation">{</span>
    <span class="name tag">&quot;auth_events&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
        <span class="punctuation">[</span>
            <span class="literal string double">&quot;$abc123:matrix.org&quot;</span><span class="punctuation">,</span>
            <span class="punctuation">{</span>
                <span class="name tag">&quot;sha256&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;Base64EncodedSha256HashesShouldBe43BytesLong&quot;</span>
            <span class="punctuation">}</span>
        <span class="punctuation">]</span>
    <span class="punctuation">],</span>
    <span class="name tag">&quot;content&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="name tag">&quot;key&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;value&quot;</span>
    <span class="punctuation">},</span>
    <span class="name tag">&quot;depth&quot;</span><span class="punctuation">:</span> <span class="literal number integer">12</span><span class="punctuation">,</span>
    <span class="name tag">&quot;event_id&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;$a4ecee13e2accdadf56c1025:example.com&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;hashes&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="name tag">&quot;sha256&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;ThisHashCoversAllFieldsInCaseThisIsRedacted&quot;</span>
    <span class="punctuation">},</span>
    <span class="name tag">&quot;origin&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;matrix.org&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;origin_server_ts&quot;</span><span class="punctuation">:</span> <span class="literal number integer">1234567890</span><span class="punctuation">,</span>
    <span class="name tag">&quot;prev_events&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>
        <span class="punctuation">[</span>
            <span class="literal string double">&quot;$abc123:matrix.org&quot;</span><span class="punctuation">,</span>
            <span class="punctuation">{</span>
                <span class="name tag">&quot;sha256&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;Base64EncodedSha256HashesShouldBe43BytesLong&quot;</span>
            <span class="punctuation">}</span>
        <span class="punctuation">]</span>
    <span class="punctuation">],</span>
    <span class="name tag">&quot;redacts&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;$def456:matrix.org&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;room_id&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;!abc123:matrix.org&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;sender&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;&#64;someone:matrix.org&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;signatures&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="name tag">&quot;example.com&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
            <span class="name tag">&quot;ed25519:key_version:&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;86BytesOfSignatureOfTheRedactedEvent&quot;</span>
        <span class="punctuation">}</span>
    <span class="punctuation">},</span>
    <span class="name tag">&quot;state_key&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;my_key&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;type&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;m.room.message&quot;</span><span class="punctuation">,</span>
    <span class="name tag">&quot;unsigned&quot;</span><span class="punctuation">:</span> <span class="punctuation">{</span>
        <span class="name tag">&quot;key&quot;</span><span class="punctuation">:</span> <span class="literal string double">&quot;value&quot;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</pre>
</div>
</div>
</div>
</div>
</body>
</html>
